<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥ä½œå¾…è¾¦ç®¡ç†ç³»çµ±</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --success-color: #27ae60;
            --bg-color: #f0f2f5;
            --text-color: #333;
            --gray-text: #777;
        }

        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
            padding-bottom: 160px; /* å¢åŠ åº•éƒ¨ç©ºé–“ */
        }

        h2 { color: var(--text-color); border-left: 5px solid var(--primary-color); padding-left: 12px; margin-bottom: 20px; }

        .task-card {
            background: white;
            padding: 18px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .task-info { display: flex; flex-direction: column; gap: 5px; }
        .task-title { font-weight: bold; font-size: 1.2rem; color: #2c3e50; }
        .task-meta { font-size: 0.85rem; color: var(--gray-text); display: flex; gap: 15px; }
        .deadline-tag { color: #d35400; font-weight: bold; }

        .btn-done {
            background-color: var(--success-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }
        .btn-done:hover { background-color: #219150; }

        .history-section { margin-top: 50px; border-top: 2px dashed #ccc; padding-top: 20px; }
        .history-card { background: #f9f9f9; border: 1px solid #ddd; opacity: 0.8; }
        .history-card .task-title { text-decoration: line-through; color: #888; }

        /* åº•éƒ¨è¼¸å…¥å€åŸŸ - å„ªåŒ–å¯¬åº¦ */
        .input-area-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 20px 0;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
        }

        .input-form {
            width: 90%;
            max-width: 850px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: flex-end;
        }

        .input-group { display: flex; flex-direction: column; gap: 5px; }
        
        /* æ–‡å­—è¼¸å…¥æ¡†å¯¬åº¦åŠ å¤§ */
        .group-title { flex: 2; min-width: 300px; } 
        .group-date { flex: 0.8; min-width: 150px; }

        label { font-size: 0.9rem; font-weight: bold; color: #555; }

        input[type="text"] { 
            padding: 12px; 
            border: 2px solid #ddd; 
            border-radius: 6px; 
            font-size: 1rem;
            outline: none;
        }
        input[type="text"]:focus { border-color: var(--primary-color); }

        input[type="date"] { padding: 11px; border: 2px solid #ddd; border-radius: 6px; }

        .btn-add { 
            background-color: var(--primary-color); 
            color: white; 
            border: none; 
            padding: 12px 25px; 
            border-radius: 6px; 
            cursor: pointer; 
            font-weight: bold;
            height: 48px;
        }
        .btn-add:hover { background-color: #357abd; }

        .empty-msg { text-align: center; color: #999; margin-top: 20px; font-style: italic; }
    </style>
</head>
<body>

<div class="container" id="app">
    <section>
        <h2>å¾…è¾¦äº‹é … (é€²è¡Œä¸­)</h2>
        <div id="pendingTasks"></div>
    </section>

    <section class="history-section">
        <h2>æ­·å²ç´€éŒ„ (å·²çµæ¡ˆ)</h2>
        <div id="historyTasks"></div>
    </section>
</div>

<div class="input-area-container">
    <div class="input-form">
        <div class="input-group group-title">
            <label for="taskTitle">å·¥ä½œå…§å®¹ (è¼¸å…¥å¾ŒæŒ‰ Enter ä¹Ÿå¯ä»¥æ–°å¢)</label>
            <input type="text" id="taskTitle" placeholder="è«‹æè¿°è¦åšçš„å·¥ä½œ...">
        </div>
        <div class="input-group group-date">
            <label for="taskDate">é è¨ˆå®Œæˆæ—¥æœŸ (åœ¨æ­¤æ—¥æœŸå‰å®Œæˆ)</label>
            <input type="date" id="taskDate">
        </div>
        <button class="btn-add" onclick="addTask()">æ–°å¢å¾…è¾¦</button>
    </div>
</div>

<script>
    let tasks = JSON.parse(localStorage.getItem('myTasks')) || [];

    // åˆå§‹åŒ–æ—¥æœŸï¼šé è¨­ç‚ºæ˜å¤©
    const tomorrow = new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    document.getElementById('taskDate').valueAsDate = tomorrow;

    function render() {
        const pendingContainer = document.getElementById('pendingTasks');
        const historyContainer = document.getElementById('historyTasks');
        
        pendingContainer.innerHTML = '';
        historyContainer.innerHTML = '';

        const pendingList = tasks.filter(t => !t.completed);
        const historyList = tasks.filter(t => t.completed);

        if (pendingList.length === 0) {
            pendingContainer.innerHTML = '<p class="empty-msg">ç›®å‰æ²’æœ‰å¾…è¾¦äº‹é …ï¼Œå¤ªæ£’äº†ï¼</p>';
        }
        
        pendingList.forEach(task => {
            pendingContainer.innerHTML += `
                <div class="task-card">
                    <div class="task-info">
                        <span class="task-title">${task.title}</span>
                        <div class="task-meta">
                            <span>ğŸ•’ ç™»éŒ„æ—¥æœŸ: ${task.createdDate}</span>
                            <span class="deadline-tag">ğŸ“… é è¨ˆå®Œæˆæ—¥æœŸ: ${task.deadline} å‰</span>
                        </div>
                    </div>
                    <button class="btn-done" onclick="completeTask(${task.id})">çµæ¡ˆ</button>
                </div>
            `;
        });

        historyList.forEach(task => {
            historyContainer.innerHTML += `
                <div class="task-card history-card">
                    <div class="task-info">
                        <span class="task-title">${task.title}</span>
                        <div class="task-meta">
                            <span>ç™»éŒ„: ${task.createdDate}</span>
                            <span>å®Œæˆ: ${new Date().toLocaleDateString()}</span>
                        </div>
                    </div>
                    <span style="color: #27ae60; font-weight: bold;">âœ“ å·²å®Œæˆ</span>
                </div>
            `;
        });

        localStorage.setItem('myTasks', JSON.stringify(tasks));
    }

    function addTask() {
        const titleInput = document.getElementById('taskTitle');
        const dateInput = document.getElementById('taskDate');

        if (!titleInput.value.trim()) {
            alert("è«‹è¼¸å…¥å·¥ä½œå…§å®¹ï¼");
            return;
        }

        const today = new Date();
        const newTask = {
            id: Date.now(),
            title: titleInput.value,
            deadline: dateInput.value,
            createdDate: today.toLocaleDateString(), // ç´€éŒ„ç™»éŒ„ç•¶å¤©çš„æ—¥æœŸ
            completed: false
        };

        tasks.unshift(newTask); // æ–°å¢çš„æ’åœ¨æœ€ä¸Šé¢
        titleInput.value = '';
        render();
        
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function completeTask(id) {
        const index = tasks.findIndex(t => t.id === id);
        if (index !== -1) {
            tasks[index].completed = true;
            render();
        }
    }

    document.getElementById('taskTitle').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') addTask();
    });

    render();
</script>

</body>
</html>
